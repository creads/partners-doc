<!DOCTYPE html>
<html dir="ltr" lang="fr-FR">
  <head>
      <title>Webhooks | Documentation Creads Partners</title>
      <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <link rel="stylesheet" href="/partners-doc/main.css" type="text/css" />
  </head>

  <body class="bg-white" cz-shortcut-listen="true" >

    
    <header class="navbar navbar-expand-lg navbar-dark bg-dark shadow fixed-top" style="z-index: 5;">

      <div class="container-fluid">
        <div class="row flex">
          <div class="col-12">
            <div class="d-block d-lg-flex justify-content-lg-between">
              <a class="navbar-brand" href="/partners-doc"><img src="/assets/logo.svg" alt="Creads" height="44"></a>
              <button class="navbar-toggler float-right mt-2 mt-lg-0 float-lg-none border-0" type="button" data-toggle="collapse" data-target="#navbarMenuMain">
                <i class="fas fa-bars navbar__toggler-icon"></i>
              </button>
              
              <div class="navbar-collapse collapse justify-content-end" id="navbarMenuMain">
                <div class="navbar__item flex-1 align-items-center">
                  
                  <a class="navbar__item-link ng-binding navbar__item-link--active" href="/partners-doc/">API</a>
                  
                  <a class="navbar__item-link ng-binding " href="/partners-doc/references">Références</a>
                  
                </div>
              </div>
              
            </div>
          </div>
        </div>
      </div>
    </header>
    


    
    <div class="container-fluid">
      <div id="tabs" class="row">
        
        
        
        <nav id="nav" class="col-2 sticky-top pt-5 mt-4 h-100 overflow-auto border-right position-fixed d-none d-lg-block bg-light"
          style="z-index: 4;">
          <ul class="list mt-3">
            
            
            <li class="list__item mb-3"><a href="/partners-doc/">Overview</a></li>
            
            <li class="list__item mb-3"><a href="/partners-doc/api/oauth2">OAuth2</a></li>
            
            <li class="list__item mb-3"><a href="/partners-doc/api/ressources">Ressources</a></li>
            
            <li class="list__item mb-3 active"><a href="/partners-doc/api/webhooks">Webhooks</a></li>
            
            <li class="list__item mb-3"><a href="/partners-doc/api/changelogs">CHANGELOGS</a></li>
            
          </ul>
        </nav>
        
        
        
        <main role="main" class="col-12 col-lg-10 offset-lg-2 pt-5 mt-4">
          <div class="row">
            <div class="col-12">
              <div class=" mt-3">
              
<section id="content" class="anchors-enabled">
<h1 id="webhooks"><a class="heading-anchor" href="#webhooks"><span></span></a>Webhooks</h1>
<p>Des webhooks sont disponibles sur l&apos;API Creads Partners. Il vous permetteront d&apos;&#xEA;tre notifi&#xE9; des changements et &#xE9;v&#xE8;nements qui op&#xE8;rent au sein de votre Organisation.</p>
<h2 id="activer-les-webhooks"><a class="heading-anchor" href="#activer-les-webhooks"><span></span></a>Activer les webhooks</h2>
<p>Pour activer les webhooks, il vous faut</p>
<ul>
<li>Un compte <strong>developer</strong> (contactez notre support pour activer cette option).</li>
<li>Ajouter un nouveau webhook dans le menu <em>Developer</em> de l&apos;application Creads Partners</li>
<li>Un serveur qui r&#xE9;pond &#xE0; l&apos;url que vous avez renseign&#xE9;e dans l&apos;interface <em>Developer</em></li>
</ul>
<h2 id="erreurs"><a class="heading-anchor" href="#erreurs"><span></span></a>Erreurs</h2>
<p>En cas d&apos;erreur sur un de vos webhooks (erreur HTTP ou bien &#xE9;chec de connexion), nous retenterons de vous notifier plusieurs fois.</p>
<p>Si trop d&apos;&#xE9;checs successifs se produisent, <strong>le webhook sera d&#xE9;sactiv&#xE9;</strong> le temps que vous r&#xE9;gliez le probl&#xE8;me, et vous serez <strong>notifi&#xE9;s par email</strong> du probl&#xE8;me.</p>
<h2 id="&#xE9;v&#xE8;nements"><a class="heading-anchor" href="#&#xE9;v&#xE8;nements"><span></span></a>&#xC9;v&#xE8;nements</h2>
<p>Les notifications webhooks qui sont envoy&#xE9;es suivent un sch&#xE9;ma d&apos;&#xE9;v&#xE8;nements se constituant comme ceci:</p>
<table>
<thead>
<tr>
<th>Attribut</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>event</code></td>
<td>Le type d&apos;&#xE9;v&#xE8;nement d&#xE9;clench&#xE9; (cr&#xE9;ation, mise &#xE0; jour, suppression)</td>
</tr>
<tr>
<td><code>resource_type</code></td>
<td>Le type de la ressource concern&#xE9;e</td>
</tr>
<tr>
<td><code>resource_gid</code></td>
<td>Le gid de la ressource concern&#xE9;e</td>
</tr>
<tr>
<td><code>resource</code></td>
<td>La ressource dans son nouvel &#xE9;tat (absent dans le cas de la suppression)</td>
</tr>
</tbody></table>
<p>Les type d&apos;&#xE9;v&#xE8;nements possibles sont les suivants</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>resource.created</code></td>
<td>La ressource vient d&apos;&#xEA;tre cr&#xE9;&#xE9;e.</td>
</tr>
<tr>
<td><code>resource.updated</code></td>
<td>La ressource a subie des modifications</td>
</tr>
<tr>
<td><code>resource.deleted</code></td>
<td>La ressource a &#xE9;t&#xE9; supprim&#xE9;e</td>
</tr>
</tbody></table>
<h2 id="&#xE9;v&#xE8;nements-disponibles"><a class="heading-anchor" href="#&#xE9;v&#xE8;nements-disponibles"><span></span></a>&#xC9;v&#xE8;nements disponibles</h2>
<p>Voici une liste &#xE0; date des &#xE9;v&#xE8;nements webhooks qui sont disponibles, par ressource:</p>
<h3 id="invitation"><a class="heading-anchor" href="#invitation"><span></span></a>Invitation</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h3 id="organization"><a class="heading-anchor" href="#organization"><span></span></a>Organization</h3>
<ul>
<li><code>resource.updated</code></li>
</ul>
<h3 id="product"><a class="heading-anchor" href="#product"><span></span></a>Product</h3>
<ul>
<li><code>resource.updated</code></li>
</ul>
<h3 id="membership"><a class="heading-anchor" href="#membership"><span></span></a>Membership</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h3 id="project"><a class="heading-anchor" href="#project"><span></span></a>Project</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h3 id="project-message"><a class="heading-anchor" href="#project-message"><span></span></a>Project Message</h3>
<ul>
<li><code>resource.created</code></li>
</ul>
<h3 id="work"><a class="heading-anchor" href="#work"><span></span></a>Work</h3>
<ul>
<li><code>resource.created</code></li>
</ul>
<h3 id="webhook"><a class="heading-anchor" href="#webhook"><span></span></a>Webhook</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h2 id="s&#xE9;curiser-les-webhooks"><a class="heading-anchor" href="#s&#xE9;curiser-les-webhooks"><span></span></a>S&#xE9;curiser les webhooks</h2>
<p>Tous les appels fait &#xE0; vos webhooks sont accompagn&#xE9;s d&apos;une signature pr&#xE9;sente dans le header HTTP <code>X-Partners-Signature</code>.</p>
<p>Nous vous recommandons de v&#xE9;rifier la validit&#xE9; de cette signature afin de vous assurer de l&apos;int&#xE9;grit&#xE9; et de l&apos;origine de la requ&#xEA;te.</p>
<p>La signature est un hash <code>sha256</code> du <strong>body</strong> (en <em>JSON</em>) de la requ&#xEA;te et de votre <strong>cl&#xE9; secr&#xE8;te</strong> fournie &#xE0; la cr&#xE9;ation du webhook.</p>
<p>Pour v&#xE9;rifier sa validit&#xE9;, il vous faut donc</p>
<ul>
<li>Votre cl&#xE9; secr&#xE8;te de webhook</li>
<li>Le body JSON de la requ&#xEA;te tel qu&apos;il est re&#xE7;u</li>
<li>G&#xE9;n&#xE9;rer un <strong>hash du body par la cl&#xE9; secr&#xE8;te</strong> avec l&apos;algorithme <code>sha256</code></li>
<li>Comparer le header envoy&#xE9; avec votre r&#xE9;sultat</li>
</ul>
<p>Par exemple, en php, vous obtiendrez le hash en faisant</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$expectedSignature</span> <span class="token operator">=</span> <span class="token function">hash_hmac</span><span class="token punctuation">(</span><span class="token single-quoted-string string">&apos;sha256&apos;</span><span class="token punctuation">,</span> <span class="token variable">$jsonBodyString</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">&apos;your_secret_key&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

</section>

              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
    

    <div id="gotoTop"><i class="fas fa-angle-up"></i></div>

    <script type="text/javascript" src="/partners-doc/main.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57696122-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>

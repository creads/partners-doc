<!DOCTYPE html>
<html dir="ltr" lang="fr-FR">
<head>
    <!-- Document Title
    ============================================= -->
    <title>Webhooks | Documentation Creads Partners</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    
    <!-- Stylesheets
    ============================================= -->
    <link href="//fonts.googleapis.com/css?family=Lato:300,400,400italic,600,700|Raleway:300,400,500,600,700|Crete+Round:400italic" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/dark.css" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/font-icons.css" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/animate.css" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/magnific-popup.css" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/responsive.css" type="text/css" />
    <link rel="stylesheet" href="/partners-doc/css/highlight/prism-okaidia.css" type="text/css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <!--[if lt IE 9]>
      <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
    <![endif]-->

    <!-- External JavaScripts
    ============================================= -->
    <script type="text/javascript" src="/partners-doc/js/jquery.js"></script>
    <script type="text/javascript" src="/partners-doc/js/plugins.js"></script>
    
</head>

<body class="stretched">

    <!-- Document Wrapper
    ============================================= -->
    <div id="wrapper" class="clearfix">

        <!-- Header
        ============================================= -->
        <header id="header" class="full-header">

            <div id="header-wrap">

                <div class="container clearfix">

                    <div id="primary-menu-trigger"><i class="icon-reorder"></i></div>

                    <!-- Logo
                    ============================================= -->
                    <div id="logo">
                        <a href="/partners-doc" class="standard-logo" data-dark-logo="/partners-doc/images/logo-dark.png"><img src="/partners-doc/images/logo.png" alt="Creads Partners"></a>
                        <a href="/partners-doc" class="retina-logo" data-dark-logo="/partners-doc/images/logo-dark@2x.png"><img src="/partners-doc/images/logo@2x.png" alt="Creads Partners"></a>
                    </div><!-- #logo end -->

                    <!-- Primary Navigation
                    ============================================= -->
                    <nav id="primary-menu">

                        <ul>
                            <li ><a href="http://www.creads-partners.com"><div>Inscription</div></a></li>
                            <li class="current"><a href="/partners-doc"><div>Doc</div></a></li>
                        </ul>


                    </nav><!-- #primary-menu end -->

                </div>

            </div>

        </header><!-- #header end -->

        <!-- Page Sub Menu
        ============================================= -->
        
        <div id="page-menu">

            <div id="page-menu-wrap">

                <div class="container clearfix">

                    <div class="menu-title">Documentation <span>Creads Partners</span></div>

                    <nav>
                        <ul>
                            
                            <li class="current"><a href="/partners-doc/">API</a></li>
                            
                            <li ><a href="/partners-doc/references">Références API</a></li>
                            
                        </ul>
                    </nav>

                <div id="page-submenu-trigger"><i class="icon-reorder"></i></div>

                </div>

            </div>

        </div><!-- #page-menu end -->
        

        <!-- Page Title
        ============================================= -->
        
        <section id="page-title">

            <div class="container clearfix">
                <h1>Documentation API</h1>
            </div>

        </section><!-- #page-title end -->
        

        
        <!-- Content
        ============================================= -->
        <section id="content">

            <div class="content-wrap">

                <div class="container clearfix">

                    <div id="side-navigation">

                        <div class="col_two_third nobottommargin">
                        <h1 id="webhooks"><a class="heading-anchor" href="#webhooks"><span></span></a>Webhooks</h1>
<p>Des webhooks sont disponibles sur l&apos;API Creads Partners. Il vous permetteront d&apos;&#xEA;tre notifi&#xE9; des changements et &#xE9;v&#xE8;nements qui op&#xE8;rent au sein de votre Organisation.</p>
<h2 id="activer-les-webhooks"><a class="heading-anchor" href="#activer-les-webhooks"><span></span></a>Activer les webhooks</h2>
<p>Pour activer les webhooks, il vous faut</p>
<ul>
<li>Un compte <strong>developer</strong> (contactez notre support pour activer cette option).</li>
<li>Ajouter un nouveau webhook dans le menu <em>Developer</em> de l&apos;application Creads Partners</li>
<li>Un serveur qui r&#xE9;pond &#xE0; l&apos;url que vous avez renseign&#xE9;e dans l&apos;interface <em>Developer</em></li>
</ul>
<h2 id="erreurs"><a class="heading-anchor" href="#erreurs"><span></span></a>Erreurs</h2>
<p>En cas d&apos;erreur sur un de vos webhooks (erreur HTTP ou bien &#xE9;chec de connexion), nous retenterons de vous notifier plusieurs fois.</p>
<p>Si trop d&apos;&#xE9;checs successifs se produisent, <strong>le webhook sera d&#xE9;sactiv&#xE9;</strong> le temps que vous r&#xE9;gliez le probl&#xE8;me, et vous serez <strong>notifi&#xE9;s par email</strong> du probl&#xE8;me.</p>
<h2 id="-v-nements"><a class="heading-anchor" href="#-v-nements"><span></span></a>&#xC9;v&#xE8;nements</h2>
<p>Les notifications webhooks qui sont envoy&#xE9;es suivent un sch&#xE9;ma d&apos;&#xE9;v&#xE8;nements se constituant comme ceci:</p>
<table>
<thead>
<tr>
<th>Attribut</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td>Le type d&apos;&#xE9;v&#xE8;nement d&#xE9;clench&#xE9; (cr&#xE9;ation, mise &#xE0; jour, suppression)</td>
</tr>
<tr>
<td><code>resource_type</code></td>
<td>Le type de la ressource concern&#xE9;e</td>
</tr>
<tr>
<td><code>resource_gid</code></td>
<td>Le gid de la ressource concern&#xE9;e</td>
</tr>
<tr>
<td><code>resource</code></td>
<td>La ressource dans son nouvel &#xE9;tat (absent dans le cas de la suppression)</td>
</tr>
</tbody>
</table>
<p>Les type d&apos;&#xE9;v&#xE8;nements possibles sont les suivants</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>resource.created</code></td>
<td>La ressource vient d&apos;&#xEA;tre cr&#xE9;&#xE9;e.</td>
</tr>
<tr>
<td><code>resource.updated</code></td>
<td>La ressource a subie des modifications</td>
</tr>
<tr>
<td><code>resource.deleted</code></td>
<td>La ressource a &#xE9;t&#xE9; supprim&#xE9;e</td>
</tr>
</tbody>
</table>
<h2 id="-v-nements-disponibles"><a class="heading-anchor" href="#-v-nements-disponibles"><span></span></a>&#xC9;v&#xE8;nements disponibles</h2>
<p>Voici une liste &#xE0; date des &#xE9;v&#xE8;nements webhooks qui sont disponibles, par ressource:</p>
<h3 id="invitation"><a class="heading-anchor" href="#invitation"><span></span></a>Invitation</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h3 id="organization"><a class="heading-anchor" href="#organization"><span></span></a>Organization</h3>
<ul>
<li><code>resource.updated</code></li>
</ul>
<h3 id="product"><a class="heading-anchor" href="#product"><span></span></a>Product</h3>
<ul>
<li><code>resource.updated</code></li>
</ul>
<h3 id="membership"><a class="heading-anchor" href="#membership"><span></span></a>Membership</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h3 id="project"><a class="heading-anchor" href="#project"><span></span></a>Project</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h3 id="project-message"><a class="heading-anchor" href="#project-message"><span></span></a>Project Message</h3>
<ul>
<li><code>resource.created</code></li>
</ul>
<h3 id="work"><a class="heading-anchor" href="#work"><span></span></a>Work</h3>
<ul>
<li><code>resource.created</code></li>
</ul>
<h3 id="webhook"><a class="heading-anchor" href="#webhook"><span></span></a>Webhook</h3>
<ul>
<li><code>resource.created</code></li>
<li><code>resource.updated</code></li>
<li><code>resource.deleted</code></li>
</ul>
<h2 id="s-curiser-les-webhooks"><a class="heading-anchor" href="#s-curiser-les-webhooks"><span></span></a>S&#xE9;curiser les webhooks</h2>
<p>Tous les appels fait &#xE0; vos webhooks sont accompagn&#xE9;s d&apos;une signature pr&#xE9;sente dans le header HTTP <code>Partners-Signature</code>.</p>
<p>Nous vous recommandons de v&#xE9;rifier la validit&#xE9; de cette signature afin de vous assurer de l&apos;int&#xE9;grit&#xE9; et de l&apos;origine de la requ&#xEA;te.</p>
<p>La signature est un hash <code>sha256</code> du <strong>body</strong> (en <em>JSON</em>) de la requ&#xEA;te et de votre <strong>cl&#xE9; secr&#xE8;te</strong> fournie &#xE0; la cr&#xE9;ation du webhook.</p>
<p>Pour v&#xE9;rifier sa validit&#xE9;, il vous faut donc</p>
<ul>
<li>Votre cl&#xE9; secr&#xE8;te de webhook</li>
<li>Le body JSON de la requ&#xEA;te tel qu&apos;il est re&#xE7;u</li>
<li>G&#xE9;n&#xE9;rer un <strong>hash du body par la cl&#xE9; secr&#xE8;te</strong> avec l&apos;algorithme <code>sha256</code></li>
<li>Comparer le header envoy&#xE9; avec votre r&#xE9;sultat</li>
</ul>
<p>Par exemple, en php, vous obtiendrez le hash en faisant</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$expectedSignature</span> <span class="token operator">=</span> <span class="token function">hash_hmac</span><span class="token punctuation">(</span><span class="token string">&apos;sha256&apos;</span><span class="token punctuation">,</span> <span class="token variable">$jsonBodyString</span><span class="token punctuation">,</span> <span class="token string">&apos;your_secret_key&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

                        </div>

                        <div class="col_one_third col_last nobottommargin">

                            <ul class="sidenav">
                                
                                <li ><a href="/partners-doc/"><i class="icon-chevron-left"></i>Overview</a></li>
                                
                                <li ><a href="/partners-doc/api/oauth2"><i class="icon-chevron-left"></i>OAuth2</a></li>
                                
                                <li ><a href="/partners-doc/api/ressources"><i class="icon-chevron-left"></i>Ressources</a></li>
                                
                                <li class="ui-tabs-active"><a href="/partners-doc/api/webhooks"><i class="icon-chevron-left"></i>Webhooks</a></li>
                                
                                <li ><a href="/partners-doc/api/changelogs"><i class="icon-chevron-left"></i>CHANGELOGS</a></li>
                                
                                
                            </ul>

                        </div>
                    </div>

                </div>

            </div>

        </section><!-- #content end -->



        <!-- Footer
        ============================================= -->
        <footer id="footer" class="dark">

            <!-- Copyrights
            ============================================= -->
            <div id="copyrights">

                <div class="container clearfix">

                    <div class="col_half">
                        Copyright &copy; 2015 Creads Partners
                    </div>

                    <div class="col_half col_last tright">
                        <div class="fright clearfix">
                            <a href="http://www.facebook.com/creads" class="social-icon si-small si-borderless si-facebook">
                                <i class="icon-facebook"></i>
                                <i class="icon-facebook"></i>
                            </a>

                            <a href="http://www.twitter.com/creads" class="social-icon si-small si-borderless si-twitter">
                                <i class="icon-twitter"></i>
                                <i class="icon-twitter"></i>
                            </a>

                            <a href="https://plus.google.com/+creads" class="social-icon si-small si-borderless si-gplus">
                                <i class="icon-gplus"></i>
                                <i class="icon-gplus"></i>
                            </a>

                            <a href="https://fr.pinterest.com/agencecreads/" class="social-icon si-small si-borderless si-pinterest">
                                <i class="icon-pinterest"></i>
                                <i class="icon-pinterest"></i>
                            </a>


                            <a href="https://github.com/creads" class="social-icon si-small si-borderless si-github">
                                <i class="icon-github"></i>
                                <i class="icon-github"></i>
                            </a>

                            <a href="https://www.linkedin.com/company/creads" class="social-icon si-small si-borderless si-linkedin">
                                <i class="icon-linkedin"></i>
                                <i class="icon-linkedin"></i>
                            </a>
                        </div>

                        <div class="clear"></div>

                        <a href="mailto:info@creads-partners.com" target="_blank"><i class="icon-envelope2"></i>  info@creads-partners.com</a> <span class="middot">&middot;</span> <a href="tel:+330155347874" target="_blank"><i class="icon-headphones"></i> 01 55 34 78 74</a> <span class="middot">&middot;</span> <i class="icon-skype2"></i> creadspartners
                    </div>

                </div>

            </div><!-- #copyrights end -->

        </footer><!-- #footer end -->

    </div><!-- #wrapper end -->

    <!-- Go To Top
    ============================================= -->
    <div id="gotoTop" class="icon-angle-up"></div>

    <!-- Footer Scripts
    ============================================= -->
    <script type="text/javascript" src="/partners-doc/js/functions.js"></script>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-57696122-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>

{
    "$schema": "http://json-schema.org/draft-04/schema",
    "type": "object",
    "properties": {
        "gid": {
            "type": "string",
            "readOnly": true
        },
        "short_code": {
            "type": "string",
            "readOnly": true
        },
        "custom_short_code": {
            "type": ["string", "null"],
            "required": false
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "readOnly": true
        },
        "modified_at": {
          "type": "string",
          "format": "date-time",
          "readOnly": true
        },
        "href": {
            "type": "string",
            "readOnly": true
        },
        "started_at": {
            "type": ["string", "null"],
            "format": "date-time"
        },
        "published_at": {
            "type": ["string", "null"],
            "format": "date-time",
            "readOnly": true
        },
        "canceled_at": {
            "type": ["string", "null"],
            "format": "date-time",
            "readOnly": true
        },
        "finished_at": {
            "type": ["string", "null"],
            "format": "date-time",
            "readOnly": true
        },
        "owner": {
            "$ref": "user.reference.json",
            "readOnly": true
        },
        "status": {
            "type": "string",
            "enum": [
                "unstarted",
                "in_progress",
                "finished",
                "waiting_for_sources",
                "waiting_for_decision",
                "canceled"
            ]
        },
        "state": {
            "type": "string",
            "enum": [
                "draft",
                "canceled",
                "published",
                "require_approval"
            ]
        },
        "title": {
            "type": "string",
            "maxLength": 80,
            "required": true
        },
        "description": {
            "type": "string",
            "required": false
        },
        "options": {
            "type": "object",
            "required": true
        },
        "organization": {
            "$ref": "reference.json",
            "required": true
        },
        "product": {
            "$ref": "product.reference.json",
            "required": true
        },
        "price": {
            "$ref": "price_value.embed.json",
            "required": true
        },
        "vat": {
            "$ref": "price_value.embed.json",
            "readOnly": true
        },
        "brief_files": {
            "type": "array",
            "items": {
                "$ref": "file.json"
            }
        },
        "source_files": {
            "type": "array",
            "items": {
                "$ref": "file.json"
            }
        },
        "winner": {
            "oneOf": [
                {"type": "null"},
                {"$ref": "reference.json"}
            ]
        },
        "quantity": {
            "type": "integer",
            "required": false,
            "default": 1,
            "maximum": 999,
            "minimum": 0
        },
        "deadline_at": {
          "type": ["string", "null"],
          "format": "date-time",
          "readOnly": true
        },
        "invited_users": {
            "type": "array",
            "items": {
                "$ref": "reference.json"
            }
        },
        "assigned_workers": {
            "type": "array",
            "items": {
                "$ref": "reference.json"
            }
        },
        "is_cancelable": {
          "type": "boolean",
          "required": false,
          "readOnly": true
        },
        "is_deletable": {
          "type": "boolean",
          "required": false,
          "readOnly": true
        }
    },
    "definitions": {
        "options": {
            "properties": {
                "mode": {
                    "type": "string",
                    "required": true
                },
                "due": {
                    "type": "integer",
                    "required": true
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false
}
